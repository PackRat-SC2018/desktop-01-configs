# standard mouse bindings and functions - 10-07-13
#=======================================================

# R - the root window, I - Icon, 
# T - title bar, S - frame sides, F - frame corners,
# W - application window and 0-9 - buttons.
# Modifiers: (A)ny, (C)ontrol, (S)hift, (M)eta, (N)othing 
# Note that A will stand for anywhere, i.e. it doesn't matter where the mouse is located.

#####
#
# DestroyFunc FuncName
# AddToFunc   FuncName
# + I (Action to happen immediately)
# + C (Action to happen on a mouse 'click)
# + D (Action to happen on a mouse 'double click')
# + H (Action to happen on a mouse 'hold')
# + M (Action to happen on a mouse 'motion')
#
###########


#####
# If you use Thumbnails, how big would you like the Icons to be?
#
# Try one of these, from tiny to large: 32, 64, 96, 128
#
# Note that the aspect ratio is maintained, so tall and thin windows may get larger icons,
# but you can change that if it annoys you.
#################

SetEnv fvwm_thumbx 107
SetEnv fvwm_thumby 60

#####
# Name:     Thumbnail
# Purpose:  Iconify a window with a reduced screenshot of the application
#           Window, looks really cool.
#
#           Uses FvwmEvent to remove the Icon when deiconified, you will want
#           to remove this if you use WindowStyle elsewhere.
#
#           Thumbnailing example: [6]http://dev.gentoo.org/~taviso/step2.png
#
##################
DestroyFunc IconThumb
AddToFunc IconThumb
+ I Raise
+ I PipeRead "xwd -silent -id $[w.id] | convert -scale '$[fvwm_thumbx]x$[fvwm_thumby]!' -frame 1x1 \
    -mattecolor black -quality 0 xwd:- png:$[HOME]/.fvwm/icon.tmp.$[w.id].png \
    && echo WindowStyle IconOverride, Icon $[HOME]/.fvwm/icon.tmp.$[w.id].png \
    || echo Nop"
+ I Iconify

DestroyFunc DeIconThumb
AddToFunc DeIconThumb
+ I DestroyWindowStyle
+ I Exec exec rm -f $HOME/.fvwm/icon.tmp.$[w.id].png

# Autoshade functions set mimics
# kwin autoshade feature
DestroyFunc ToggleAutoshaded
AddToFunc ToggleAutoshaded
+ I State 0

DestroyFunc AutoShade
AddToFunc AutoShade
+ I ThisWindow (State 0) WindowShade True

DestroyFunc AutoUnshade
AddToFunc AutoUnshade
+ I ThisWindow (State 0) WindowShade False

# Widescreen formatting 
DestroyFunc ReadableWidth
AddToFunc ReadableWidth
+ I Maximize 66 90
+ I Move 50-50w 50-50w

DestroyFunc FvwmMaximize
AddToFunc   FvwmMaximize
+ H Nop
+ M Nop
+ C Maximize $0 $1

DestroyFunc FvwmVMaximize
AddToFunc FvwmVMaximize
+ H Nop
+ M Nop
+ C Maximize 0 100

DestroyFunc FvwmHMaximize
AddToFunc FvwmHMaximize
+ H Nop
+ M Nop
+ C Maximize 100 0

DestroyFunc ResizeOrRaise
AddToFunc ResizeOrRaise
+ I Raise
+ M Resize
+ D Lower

DestroyFunc Move-Raise-Shade
AddToFunc   Move-Raise-Shade
+ I Raise
+ M Move
+ D WindowShade

DestroyFunc DeiconifyAndRearrange
AddToFunc DeiconifyAndRearrange
+ C Iconify off
+ C All (CurrentPage, Iconic) PlaceAgain Icon

DestroyFunc AnimateIcon
AddToFunc AnimateIcon
+ C DeiconifyAndRearrange
+ M Raise
+ M Move
+ D DeiconifyAndRearrange

DestroyFunc DeleteOrDestroy
AddToFunc   DeleteOrDestroy
+ H Nop
+ M Nop
+ C Delete
+ D Destroy

DestroyFunc WindowShade
AddToFunc   WindowShade
+ H Nop
+ M Nop
+ C WindowShade $0
+ D WindowShade $0

# this isn't working

DestroyFunc SelectRaiseAndFocus
AddToFunc SelectRaiseAndFocus
+ C DeiconifyAndRearrange
+ I Raise
+ I Focus

DestroyFunc DeiconifyRaiseAndFocus
AddToFunc DeiconifyRaiseAndFocus
+ I Iconify off
+ I Raise
+ I Focus

DestroyFunc DeiconifyFocusAndRaise
AddToFunc DeiconifyFocusAndRaise
+ I Iconify off
+ I Focus
+ I Raise

DestroyFunc 4dwmShowDesktop
AddToFunc   4dwmShowDesktop
+ I All (CurrentPage, Iconic, State 1) 4dwmRestoreDesktop
+ I TestRc (Match) Break
+ I All (CurrentPage, !Iconic, !Sticky, !State 1) ThisWindow State 1 True
+ I All (CurrentPage, !Iconic, !Sticky, State 1) Iconify

DestroyFunc 4dwmRestoreDesktop
AddToFunc   4dwmRestoreDesktop
+ I All (CurrentPage, Iconic, State 1) Iconify off
+ I All (CurrentPage, State 1) ThisWindow State 1 False

# define iconbox

#======FvwmIconBox specs [l t r b]===============#

Style * StickyIcon
Style * IconTitleRelief 0
Style * IconBackgroundRelief 0
Style * IconBackgroundPadding 1
Style * IconSize 56 56 160 160
Style * IconFont "Shadow=0 0 SE:xft:Monospace:style=regular:pixelsize=12:antialias=true:hinting=slight"
Style * IconBackgroundColorset 4
Style * IconTitleColorset 4
Style * HilightIconTitleColorset 4
Style * Icon unknown1.xpm

# top left
# Style "*" IconBox 4 4 400 288, IconGrid 20 20, IconFill left top
# Style "*" IconBox 8 64 800 128, IconGrid 24 24, IconFill left top
#
# top center
# Style * IconBox 512 8 1066 256, IconGrid 24 24, IconFill left top
#
# bottom center
# Style * IconBox 400 836 1200 899, IconGrid 24 24, IconFill left top
#
# top right
# Style * IconBox 1250 48 1360 640, IconGrid 24 24, IconFill left top
#
# bottom left
# Style * IconBox 8 832 800 896, IconGrid 24 24 , IconFill left top
#
# middle right
# Style * Iconbox 1224 300 1360 600, IconGrid 36 36, IconFill left top
#
# middle left
# Style * Iconbox 4 144 256 800, IconGrid 24 24, IconFill left top
#
# thumbnails
Style "*" Iconbox 400 834 1400 898, IconGrid 8 8, IconFill left top

# comment out if iconbox needed; then select IconBox location
# Style * !Icon
Style * !IconTitle

# Window Buttons: [1 3 5 7 9  TTTTT  0 8 6 4 2]
#   1 - Open the WindowOps menu.
#   2 - Close on single click, Destory on double click.
#   4 - Maximize (right/middle button will only maximize vertical/horizontal)
#   6 - Iconify (minimize)
Mouse 1 1 A Menu MenuWindowOps
Mouse 1 2 A MoveClickX Nop Close Destroy
Mouse 1 4 A Maximize 100 100
Mouse 2 4 A Maximize 0 100
Mouse 3 4 A Maximize 100 0
# Mouse 1 6 A Iconify
# Mouse 1 6 A IconThumb
Mouse 1 6 A AppThumbnail

#   TitleBar: Click to Raise, Move, Double Click to Maximize
#             Mouse Wheel Up/Down to WindowShade On/Off
#   Borders: Click to raise, Move to Resize
#   Root Window: Left Click - Main Menu
#                Right Click - WindowOps Menu
#                Middle Click - Window List Menu
#   Right click TitleBar/Borders for WindowOps Menu
Mouse 1	T    A MoveClickX Move Raise Maximize
Mouse 4	T    A MoveClickX Nop Raise "WindowShade True"
Mouse 5	T    A MoveClickX Nop Raise "WindowShade False"
Mouse 3	T    A Menu MenuWindowOps

Mouse 1	R    A Menu MenuFvwmRoot
Mouse 2	R    A WindowList
Mouse 3	R    A Menu MenuWindowOpsLong

# Mouse 1	I  A MoveClickX Move Iconify Nop
Mouse 1	I	A  DeiconifyAndRearrange
Mouse 2 I   A  Menu MenuIconOps
Mouse 3 I   A  MoveClickX Move Nop Destroy

Mouse 1	FS   A MoveClickX Resize Raise Nop
Mouse 1 W    M MoveClickX Move Raise Nop
Mouse 3 W    M MoveClickX Resize Raise Nop

Mouse 3 T M RaiseLowerX Nop Lower Nop

# EOF
