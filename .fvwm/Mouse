# standard mouse bindings and functions - 10-07-13
#=======================================================

# R - the root window, I - Icon, 
# T - title bar, S - frame sides, F - frame corners,
# W - application window and 0-9 - buttons.
# Modifiers: (A)ny, (C)ontrol, (S)hift, (M)eta, (N)othing 
# Note that A will stand for anywhere, i.e. it doesn't matter where the mouse is located.

#####
#
# DestroyFunc FuncName
# AddToFunc   FuncName
# + I (Action to happen immediately)
# + C (Action to happen on a mouse 'click)
# + D (Action to happen on a mouse 'double click')
# + H (Action to happen on a mouse 'hold')
# + M (Action to happen on a mouse 'motion')
#
###########


#####
# If you use Thumbnails, how big would you like the Icons to be?
#
# Try one of these, from tiny to large: 32, 64, 96, 128
#
# Note that the aspect ratio is maintained, so tall and thin windows may get larger icons,
# but you can change that if it annoys you.
#################

SetEnv fvwm_thumbx 100
SetEnv fvwm_thumby 56

#####
# Name:     Thumbnail
# Purpose:  Iconify a window with a reduced screenshot of the application
#           Window, looks really cool.
#
#           Uses FvwmEvent to remove the Icon when deiconified, you will want
#           to remove this if you use WindowStyle elsewhere.
#
#           Thumbnailing example: [6]http://dev.gentoo.org/~taviso/step2.png
#
##################
DestroyFunc IconThumb
AddToFunc IconThumb
+ I Raise
+ I PipeRead "xwd -silent -id $[w.id] | convert -scale '$[fvwm_thumbx]x$[fvwm_thumby]!' -frame 1x1 \
    -mattecolor black -quality 0 xwd:- png:$[HOME]/.fvwm/icon.tmp.$[w.id].png \
    && echo WindowStyle IconOverride, Icon $[HOME]/.fvwm/icon.tmp.$[w.id].png, StaysOnBottom \
    || echo Nop"
+ I Iconify

DestroyFunc DeIconThumb
AddToFunc DeIconThumb
+ I DestroyWindowStyle
+ I Exec exec rm -f $HOME/.fvwm/icon.tmp.$[w.id].png

# Autoshade functions set mimics
# kwin autoshade feature
DestroyFunc ToggleAutoshaded
AddToFunc ToggleAutoshaded
+ I State 0

DestroyFunc AutoShade
AddToFunc AutoShade
+ I ThisWindow (State 0) WindowShade True

DestroyFunc AutoUnshade
AddToFunc AutoUnshade
+ I ThisWindow (State 0) WindowShade False

# Widescreen formatting 
DestroyFunc ReadableWidth
AddToFunc ReadableWidth
+ I Maximize 66 90
+ I Move 50-50w 50-50w

DestroyFunc FvwmMaximize
AddToFunc   FvwmMaximize
+ H Nop
+ M Nop
+ C Maximize $0 $1

DestroyFunc FvwmVMaximize
AddToFunc FvwmVMaximize
+ H Nop
+ M Nop
+ C Maximize 0 100

DestroyFunc FvwmHMaximize
AddToFunc FvwmHMaximize
+ H Nop
+ M Nop
+ C Maximize 100 0

DestroyFunc ResizeOrRaise
AddToFunc ResizeOrRaise
+ I Raise
+ M Resize
+ D Lower

DestroyFunc Move-Raise-Shade
AddToFunc   Move-Raise-Shade
+ I Raise
+ M Move
+ D WindowShade

DestroyFunc DeiconifyAndRearrange
AddToFunc DeiconifyAndRearrange
+ C Iconify off
+ C All (CurrentPage, Iconic) PlaceAgain Icon

DestroyFunc AnimateIcon
AddToFunc AnimateIcon
+ C DeiconifyAndRearrange
+ M Raise
+ M Move
+ D DeiconifyAndRearrange

DestroyFunc DeleteOrDestroy
AddToFunc   DeleteOrDestroy
+ H Nop
+ M Nop
+ C Delete
+ D Destroy

DestroyFunc WindowShade
AddToFunc   WindowShade
+ H Nop
+ M Nop
+ C WindowShade $0
+ D WindowShade $0

# this isn't working

DestroyFunc SelectRaiseAndFocus
AddToFunc SelectRaiseAndFocus
+ C DeiconifyAndRearrange
+ I Raise
+ I Focus

DestroyFunc DeiconifyRaiseAndFocus
AddToFunc DeiconifyRaiseAndFocus
+ I Iconify off
+ I Raise
+ I Focus

########

DestroyFunc DeiconifyFocusAndRaise
AddToFunc DeiconifyFocusAndRaise
+ I Iconify off
+ I Focus
+ I Raise

DestroyFunc 4dwmShowDesktop
AddToFunc   4dwmShowDesktop
+ I All (CurrentPage, Iconic, State 1) 4dwmRestoreDesktop
+ I TestRc (Match) Break
+ I All (CurrentPage, !Iconic, !Sticky, !State 1) ThisWindow State 1 True
+ I All (CurrentPage, !Iconic, !Sticky, State 1) Iconify

DestroyFunc 4dwmRestoreDesktop
AddToFunc   4dwmRestoreDesktop
+ I All (CurrentPage, Iconic, State 1) Iconify off
+ I All (CurrentPage, State 1) ThisWindow State 1 False

# some simple default mouse bindings:

#		root window:
Mouse 1 R       A       Menu MenuFvwmRoot Nop
Mouse 2 R       A       Menu WindowOptionsMenu Nop
Mouse 3 R       A       WindowList

#		buttons
# mouse 1
Mouse 1	1	A	Menu WindowOptionsMenu Close
Mouse 1	3	A	WindowShade
Mouse 1	2	A	Close
Mouse 1 4	A	FvwmMaximize
Mouse 1	6	A	Iconify
# Mouse 1 6	A	IconThumb
# Mouse 1		6	A	AppThumbnail

# mouse 2
Mouse 2	1	A	Menu WindowOptionsMenu Close
Mouse 2	3	A	Destroy
Mouse 2	2	A	Close
Mouse 2	4	A	FvwmVMaximize
Mouse 2	6	A	Iconify

# mouse 3
Mouse 3	1	A	Menu WindowOptionsMenu Close
Mouse 3	3	A	FvwmIdent
Mouse 3	2	A	Destroy
Mouse 3	4	A	FvwmHMaximize
Mouse 3	6	A	Iconify

#		window
#Mouse 1	FS	A	ResizeOrRaise
#Mouse 1	T	A	Move-Raise-Shade
Mouse 1 T   A   MoveClickX Move Raise Maximize
Mouse 1 FS  A   ResizeOrRaise
Mouse 1	I	A	DeiconifyAndRearrange
Mouse 2	I	A	MoveClickX Move "Iconify off"
Mouse 3 I	A	Close
Mouse 2 T	A	WindowShade
Mouse 3 TSIF	A	RaiseLower

# fluxbox style
Mouse 1	W	M	Move-Raise-Shade
Mouse 1 W	MS	RaiseLower
Mouse 3	W	M	ResizeOrRaise

# EOF
